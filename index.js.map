{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createImageHtmlTemplate = image => {\n  return `\n    <li class=\"gallery-card\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n          class=\"gallery-img\"\n          src=\"${image.webformatURL}\"\n          alt=\"${image.tags}\"\n        />\n      </a>\n      <div class=\"gallery-info\" style=\"display: flex; justify-content: space-around; padding: 8px; font-size: 14px; border: 1px solid #ddd; border-top: none;\">\n        <div><strong>Likes</strong><br>${image.likes}</div>\n        <div><strong>Views</strong><br>${image.views}</div>\n        <div><strong>Comments</strong><br>${image.comments}</div>\n        <div><strong>Downloads</strong><br>${image.downloads}</div>\n      </div>\n    </li>\n  `;\n};","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const fetchPhotosByQuery = (searchQuery, currentPage) => {\n  const requestParams = {\n    q: searchQuery,\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: true,\n    key: '50729371-43a7836f0c474a05c441d935f',\n    page: currentPage,\n    per_page: 15,\n  };\n\n  return axios.get(`/`, {params: requestParams});\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createImageHtmlTemplate } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst loadMore = document.querySelector('.load-btn');\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet currentPage = 1;\nlet searchQuery = '';\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    const { target: searchForm } = event;\n\n    searchQuery = searchForm.elements.user_query.value;\n\n    loader.classList.add('active');\n\n    gallery.innerHTML = '';\n\n    loadMore.classList.add('is-hidden');\n\n    currentPage = 1;\n\n    const { data } = await fetchPhotosByQuery(searchQuery, currentPage);\n\n    loader.classList.remove('active');\n\n    if (data.totalHits === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      gallery.innerHTML = '';\n\n      return;\n    }\n\n    if (data.totalHits > 15) {\n      loadMore.classList.remove('is-hidden');\n      loadMore.addEventListener('click', onLoadBtnClick);\n    }\n\n    const galleryHtmlTemplate = data.hits.map(image => createImageHtmlTemplate(image)).join('');\n    gallery.innerHTML = galleryHtmlTemplate;\n    lightbox.refresh();\n\n  } catch (error) {\n    loader.classList.remove('active');\n    console.log(error);\n  }\n};\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadBtnClick = async event => {\n  try {\n    currentPage++;\n\n    const { data } = await fetchPhotosByQuery(searchQuery, currentPage);\n\n    const galleryHtmlTemplate = data.hits.map(image => createImageHtmlTemplate(image)).join('');\n\n    if (currentPage * 15 > data.total){\n      loadMore.classList.add('is-hidden');\n      loadMore.removeEventListener('click', onLoadBtnClick);\n      iziToast.info({\n        message: 'We\\'re sorry, but you\\'ve reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n\n    gallery.insertAdjacentHTML('beforeend', galleryHtmlTemplate);\n    lightbox.refresh();\n\n    const firstCard = document.querySelector('.gallery-card');\n\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n\n  } catch (error) {\n    console.log(error);\n  }\n};"],"names":["createImageHtmlTemplate","image","axios","fetchPhotosByQuery","searchQuery","currentPage","requestParams","searchForm","gallery","loader","loadMore","lightbox","SimpleLightbox","onSearchFormSubmit","event","data","iziToast","onLoadBtnClick","galleryHtmlTemplate","error","cardHeight"],"mappings":"owBAAO,MAAMA,EAA0BC,GAC9B;AAAA;AAAA,sCAE6BA,EAAM,aAAa;AAAA;AAAA;AAAA,iBAGxCA,EAAM,YAAY;AAAA,iBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,yCAIcA,EAAM,KAAK;AAAA,yCACXA,EAAM,KAAK;AAAA,4CACRA,EAAM,QAAQ;AAAA,6CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,ICZ5DC,EAAM,SAAS,QAAU,0BAElB,MAAMC,EAAqB,CAACC,EAAaC,IAAgB,CAC9D,MAAMC,EAAgB,CACpB,EAAGF,EACH,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,IAAK,qCACL,KAAMC,EACN,SAAU,EACd,EAEE,OAAOH,EAAM,IAAI,IAAK,CAAC,OAAQI,CAAa,CAAC,CAC/C,ECTMC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAW,SAAS,cAAc,WAAW,EAE7CC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIP,EAAc,EACdD,EAAc,GAElB,MAAMS,EAAqB,MAAMC,GAAS,CACxC,GAAI,CACFA,EAAM,eAAc,EAEpB,KAAM,CAAE,OAAQP,CAAY,EAAGO,EAE/BV,EAAcG,EAAW,SAAS,WAAW,MAE7CE,EAAO,UAAU,IAAI,QAAQ,EAE7BD,EAAQ,UAAY,GAEpBE,EAAS,UAAU,IAAI,WAAW,EAElCL,EAAc,EAEd,KAAM,CAAE,KAAAU,CAAI,EAAK,MAAMZ,EAAmBC,EAAaC,CAAW,EAIlE,GAFAI,EAAO,UAAU,OAAO,QAAQ,EAE5BM,EAAK,YAAc,EAAG,CACxBC,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAClB,CAAO,EAEDR,EAAQ,UAAY,GAEpB,MACD,CAEGO,EAAK,UAAY,KACnBL,EAAS,UAAU,OAAO,WAAW,EACrCA,EAAS,iBAAiB,QAASO,CAAc,GAGnD,MAAMC,EAAsBH,EAAK,KAAK,IAAId,GAASD,EAAwBC,CAAK,CAAC,EAAE,KAAK,EAAE,EAC1FO,EAAQ,UAAYU,EACpBP,EAAS,QAAO,CAEjB,OAAQQ,EAAO,CACdV,EAAO,UAAU,OAAO,QAAQ,EAChC,QAAQ,IAAIU,CAAK,CAClB,CACH,EACAZ,EAAW,iBAAiB,SAAUM,CAAkB,EAExD,MAAMI,EAAiB,MAAMH,GAAS,CACpC,GAAI,CACFT,IAEA,KAAM,CAAE,KAAAU,CAAI,EAAK,MAAMZ,EAAmBC,EAAaC,CAAW,EAE5Da,EAAsBH,EAAK,KAAK,IAAId,GAASD,EAAwBC,CAAK,CAAC,EAAE,KAAK,EAAE,EAEtFI,EAAc,GAAKU,EAAK,QAC1BL,EAAS,UAAU,IAAI,WAAW,EAClCA,EAAS,oBAAoB,QAASO,CAAc,EACpDD,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAGHR,EAAQ,mBAAmB,YAAaU,CAAmB,EAC3DP,EAAS,QAAO,EAIhB,MAAMS,EAFY,SAAS,cAAc,eAAe,EAE3B,sBAAqB,EAAG,OAErD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CAEF,OAAQD,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH"}